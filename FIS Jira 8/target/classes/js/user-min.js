var searchData={};AJS.toInit(function(){AJS.$("#dialog-show-button").on("click",function(a){a.preventDefault();AJS.dialog2("#demo-dialog").show()});sendAjaxGetRequestQueryParam({},AJS.contextPath()+"/rest/fisJiraRest/1.0/user/getAll",getAllUserSuccessFunction,null);$.validator.addMethod("example_validator",function(b,a){if(b.includes("a")){return false}else{return true}});$.validator.addMethod("date_validator",function(c,b){var f=new Date();present_time=f.getTime();var e=AJS.$("#dateComboBox").val();var a=new Date(moment(e,dateFormatText).toDate().getTime());if(a>present_time){return false}else{return true}});$("#createUserForm").validate({rules:{inputTwo:{required:true,example_validator:true},inputThree:{required:true,example_validator:true},inputFour:{required:true,example_validator:true},inputFive:{required:true,example_validator:true},dateComboBox:{required:true,date_validator:true}},messages:{inputTwo:{required:"This is a required field",example_validator:"Can't have a"},inputThree:{required:"This is a required field",example_validator:"Can't have a"},inputFour:{required:"This is a required field",example_validator:"Can't have a"},inputFive:{required:"This is a required field",example_validator:"Can't have a"},dateComboBox:{require:"This is a required field",date_validator:"Your DOB should equal or smaller than today"}},submitHandler:function(b){var a={name:$("#inputTwo").val(),account:$("#inputThree").val(),email:$("#inputFour").val(),phone:$("#inputFive").val(),birthdayStr:$("#dateComboBox").val()};sendAjaxPostRequest(a,AJS.contextPath()+"/rest/fisJiraRest/1.0/user/create",userCreateSuccessFunction,null)}});$("#searchUserForm").validate({rules:{inputOne1:{required:false,example_validator:true},inputTwo1:{required:false,example_validator:true},inputThree1:{required:false,example_validator:true},inputFour1:{required:false,example_validator:true},inputFive1:{required:false,example_validator:true},dateComboBox1:{required:false,date_validator:true},numberlimit:{required:true},page:{required:true}},messages:{inputOne1:{required:"This is a required field",example_validator:"Can't have a"},inputTwo1:{required:"This is a required field",example_validator:"Can't have a"},inputThree1:{required:"This is a required field",example_validator:"Can't have a"},inputFour1:{required:"This is a required field",example_validator:"Can't have a"},inputFive1:{required:"This is a required field",example_validator:"Can't have a"},dateComboBox1:{require:"This is a required field",date_validator:"Your DOB should equal or smaller than today"},numberlimit:{required:"This is a required field"},page:{required:"This is a required field"}},submitHandler:function(b){var a={id:$("#inputOne1").val(),name:$("#inputTwo1").val(),account:$("#inputThree1").val(),email:$("#inputFour1").val(),phone:$("#inputFive1").val(),birthdayStr:$("#dateComboBox1").val(),recordsPerPage:$("#numberlimit").val(),page:$("#pageNumber").val()};sendAjaxGetRequestQueryParam(a,AJS.contextPath()+"/rest/fisJiraRest/1.0/user/search",exampleSuccessFunction,null)}});$("#editUserForm").validate({rules:{inputTwo2:{required:true,example_validator:true},inputThree2:{required:true,example_validator:true},inputFour2:{required:true,example_validator:true},inputFive2:{required:true,example_validator:true},dateComboBox2:{required:true,date_validator:true}},messages:{inputTwo2:{required:"This is a required field",example_validator:"Can't have a"},inputThree2:{required:"This is a required field",example_validator:"Can't have a"},inputFour2:{required:"This is a required field",example_validator:"Can't have a"},inputFive2:{required:"This is a required field",example_validator:"Can't have a"},dateComboBox2:{require:"This is a required field",date_validator:"Your DOB should equal or smaller than today"}},submitHandler:function(b){var a={id:$("#inputOne2").val(),name:$("#inputTwo2").val(),account:$("#inputThree2").val(),email:$("#inputFour2").val(),phone:$("#inputFive2").val(),birthdayStr:$("#dateComboBox2").val()};sendAjaxPostRequest(a,AJS.contextPath()+"/rest/fisJiraRest/1.0/user/edit",userEditSuccessFunction,null)}});dateUtils.setupCalendarForInput("dateComboBox1","icon-searchDate-create-picker1",false,dateFormat);dateUtils.setupCalendarForInput("dateComboBox","icon-searchDate-create-picker",false,dateFormat);dateUtils.setupCalendarForInput("dateComboBox2","icon-searchDate-create-picker2",false,dateFormat)});function shuffle(a){return a.split("").sort(function(){return 0.5-Math.random()}).join("")}function userCreateSuccessFunction(a){alert("aa");AJS.dialog2("#demo-dialog").hide()}function userEditSuccessFunction(a){alert("Edit success");AJS.dialog2("#demo-dialog3").hide()}function exampleSuccessFunction(c){searchData=c.userEntityDtoList;var b={userList:c.userEntityDtoList};var d=exampleTable.viewAllUserList(b);$("#Alluser").html(d);$("#totalPage").html(c.totalPage);$("#totalItem").html(c.totalItem);AJS.$(".dialog-show-button3").on("click",function(){var a=findUser($(this).parent().parent().attr("userid"));AJS.$("#inputOne2").val(a.id);AJS.$("#inputTwo2").val(a.name);AJS.$("#inputThree2").val(a.account);AJS.$("#inputFour2").val(a.email);AJS.$("#inputFive2").val(a.phone);AJS.$("#dateComboBox2").val(moment(new Date(a.birthday)).format(dateFormatText));AJS.dialog2("#demo-dialog3").show()});AJS.$(".removebtn").on("click",function(){var a=$(this).parent().parent().attr("userid");sendAjaxPostRequest(a,AJS.contextPath()+"/rest/fisJiraRest/1.0/user/removeOne",userDeleteSuccessFunction,null)});AJS.$("#nextbtn").unbind();AJS.$("#nextbtn").on("click",function(a){if(parseInt($("#pageNumber").val())<c.totalPage){AJS.$("#pageNumber").val(parseInt($("#pageNumber").val())+1);sendAjaxGetRequestQueryParam({page:$("#pageNumber").val(),id:$("#inputOne1").val(),name:$("#inputTwo1").val(),account:$("#inputThree1").val(),email:$("#inputFour1").val(),phone:$("#inputFive1").val(),birthdayStr:$("#dateComboBox1").val(),recordsPerPage:$("#numberlimit").val()},AJS.contextPath()+"/rest/fisJiraRest/1.0/user/search",exampleSuccessFunction,null)}else{alert("It is the last page")}});AJS.$("#previousbtn").unbind();AJS.$("#previousbtn").on("click",function(){if(parseInt($("#pageNumber").val())>1){sendAjaxGetRequestQueryParam({page:parseInt($("#pageNumber").val())-1,id:$("#inputOne1").val(),name:$("#inputTwo1").val(),account:$("#inputThree1").val(),email:$("#inputFour1").val(),phone:$("#inputFive1").val(),birthdayStr:$("#dateComboBox1").val(),recordsPerPage:$("#numberlimit").val()},AJS.contextPath()+"/rest/fisJiraRest/1.0/user/search",exampleSuccessFunction,null);AJS.$("#pageNumber").val(parseInt($("#pageNumber").val())-1)}else{alert("Dont have previous page")}});AJS.$("#firstbtn").on("click",function(){sendAjaxGetRequestQueryParam({page:1,id:$("#inputOne1").val(),name:$("#inputTwo1").val(),account:$("#inputThree1").val(),email:$("#inputFour1").val(),phone:$("#inputFive1").val(),birthdayStr:$("#dateComboBox1").val(),recordsPerPage:$("#numberlimit").val()},AJS.contextPath()+"/rest/fisJiraRest/1.0/user/search",exampleSuccessFunction,null);AJS.$("#pageNumber").val("1")});AJS.$("#lastbtn").on("click",function(){sendAjaxGetRequestQueryParam({page:c.totalPage,id:$("#inputOne1").val(),name:$("#inputTwo1").val(),account:$("#inputThree1").val(),email:$("#inputFour1").val(),phone:$("#inputFive1").val(),birthdayStr:$("#dateComboBox1").val(),recordsPerPage:$("#numberlimit").val()},AJS.contextPath()+"/rest/fisJiraRest/1.0/user/search",exampleSuccessFunction,null);AJS.$("#pageNumber").val(c.totalPage)})}function userDeleteSuccessFunction(a){AJS.$("div [userid="+a+"]").remove();alert("delete success")}function findUser(a){for(i=0;i<searchData.length;i++){if(searchData[i].id==a){return searchData[i]}}return null}function getAllUserSuccessFunction(b){function a(c){return _.map(c,function(d){return{id:d.id,text:d.name,}})}(function(){$("#test").select2({data:a(),placeholder:"search",query:function(f){var c,d,e=this;c=20;d=[];if(f.term&&f.term!==""){d=_.filter(e.data,function(g){return g.text.toUpperCase().indexOf(f.term.toUpperCase())>=0})}else{if(f.term===""){d=e.data}}f.callback({results:d.slice((f.page-1)*c,f.page*c),more:d.length>=f.page*c,})},})})()};